<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Admin courses</title>
      <link rel="stylesheet" href="/fontawesome/css/all.min.css">
      <link rel="stylesheet" href="/adminlte/dist/css/adminlte.min.css">
   </head>
   <body class="layout-fixed sidebar-expand-lg bg-body-tertiary">
      <!--begin::App Wrapper-->
      <div class="app-wrapper">
         <!--begin::Header-->
         <nav class="app-header navbar navbar-expand bg-body">
            <!--begin::Container-->
            <div class="container-fluid">
              <!-- Start navbar links -->
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link" data-lte-toggle="sidebar" href="#" role="button">
                     <i class="fa-solid fa-bars"></i>
                  </a>
                </li>
                <li class="nav-item d-none d-md-block">
                  <a href="#" class="nav-link">Home</a>
                </li>
                <li class="nav-item d-none d-md-block">
                  <a href="#" class="nav-link">Contact</a>
                </li>
              </ul>
              <!-- End navbar links -->
          
              <ul class="navbar-nav ms-auto">
                <!-- Navbar Search -->
                <li class="nav-item">
                  <a class="nav-link" data-widget="navbar-search" href="#" role="button">
                     <i class="fa-solid fa-magnifying-glass"></i>
                  </a>
                </li>
          
                <!-- Messages Dropdown Menu -->
                <li class="nav-item dropdown">
                  <a class="nav-link" data-bs-toggle="dropdown" href="#">
                     <i class="fa-regular fa-comment"></i>
                    <span class="navbar-badge badge text-bg-danger">3</span>
                  </a>
                  <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end">
                    <a href="#" class="dropdown-item">
                      <!-- Message Start -->
                      <div class="d-flex">
                        <div class="flex-shrink-0">
                          <img
                            src="../../../dist/assets/img/user1-128x128.jpg"
                            alt="User Avatar"
                            class="img-size-50 rounded-circle me-3"
                          />
                        </div>
                        <div class="flex-grow-1">
                          <h3 class="dropdown-item-title">
                            Brad Diesel
                            <span class="float-end fs-7 text-danger">
                              <i class="bi bi-star-fill"></i>
                            </span>
                          </h3>
                          <p class="fs-7">Call me whenever you can...</p>
                          <p class="fs-7 text-secondary">
                            <i class="bi bi-clock-fill me-1"></i> 4 Hours Ago
                          </p>
                        </div>
                      </div>
                      <!-- Message End -->
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item">
                      <!-- Message Start -->
                      <div class="d-flex">
                        <div class="flex-shrink-0">
                          <img
                            src="../../../dist/assets/img/user8-128x128.jpg"
                            alt="User Avatar"
                            class="img-size-50 rounded-circle me-3"
                          />
                        </div>
                        <div class="flex-grow-1">
                          <h3 class="dropdown-item-title">
                            John Pierce
                            <span class="float-end fs-7 text-secondary">
                              <i class="bi bi-star-fill"></i>
                            </span>
                          </h3>
                          <p class="fs-7">I got your message bro</p>
                          <p class="fs-7 text-secondary">
                            <i class="bi bi-clock-fill me-1"></i> 4 Hours Ago
                          </p>
                        </div>
                      </div>
                      <!-- Message End -->
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item">
                      <!-- Message Start -->
                      <div class="d-flex">
                        <div class="flex-shrink-0">
                          <img
                            src="../../../dist/assets/img/user3-128x128.jpg"
                            alt="User Avatar"
                            class="img-size-50 rounded-circle me-3"
                          />
                        </div>
                        <div class="flex-grow-1">
                          <h3 class="dropdown-item-title">
                            Nora Silvester
                            <span class="float-end fs-7 text-warning">
                              <i class="bi bi-star-fill"></i>
                            </span>
                          </h3>
                          <p class="fs-7">The subject goes here</p>
                          <p class="fs-7 text-secondary">
                            <i class="bi bi-clock-fill me-1"></i> 4 Hours Ago
                          </p>
                        </div>
                      </div>
                      <!-- Message End -->
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item dropdown-footer">See All Messages</a>
                  </div>
                </li>
                <!-- Notifications Dropdown Menu -->
                <li class="nav-item dropdown">
                  <a class="nav-link" data-bs-toggle="dropdown" href="#">
                     <i class="fa-solid fa-bell"></i>
                    <span class="navbar-badge badge text-bg-warning">15</span>
                  </a>
                  <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end">
                    <span class="dropdown-item dropdown-header">15 Notifications</span>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item">
                      <i class="bi bi-envelope me-2"></i> 4 new messages
                      <span class="float-end text-secondary fs-7">3 mins</span>
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item">
                      <i class="bi bi-people-fill me-2"></i> 8 friend requests
                      <span class="float-end text-secondary fs-7">12 hours</span>
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item">
                      <i class="bi bi-file-earmark-fill me-2"></i> 3 new reports
                      <span class="float-end text-secondary fs-7">2 days</span>
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item dropdown-footer">
                      See All Notifications
                    </a>
                  </div>
                </li>
                <li class="nav-item dropdown user-menu">
                  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                    <img
                      src="../uploads/me.jpg"
                      class="user-image rounded-circle shadow"
                      alt="User Image"
                    />
                    <span class="d-none d-md-inline">Youssef Sfaa</span>
                  </a>
                  <ul class="dropdown-menu dropdown-menu-lg dropdown-menu-end">
                    <!-- User image -->
                    <li class="user-header text-bg-primary">
                      <img
                        src="../../../dist/assets/img/user2-160x160.jpg"
                        class="rounded-circle shadow"
                        alt="User Image"
                      />
          
                      <p>
                        Alexander Pierce - Web Developer
                        <small>Member since Nov. 2023</small>
                      </p>
                    </li>
                    <!-- Menu Body -->
                    <li class="user-body">
                      <!--begin::Row-->
                      <div class="row">
                        <div class="col-4 text-center">
                          <a href="#">Followers</a>
                        </div>
                        <div class="col-4 text-center">
                          <a href="#">Sales</a>
                        </div>
                        <div class="col-4 text-center">
                          <a href="#">Friends</a>
                        </div>
                      </div>
                      <!--end::Row-->
                    </li>
                    <!-- Menu Footer-->
                    <li class="user-footer">
                      <a href="#" class="btn btn-default btn-flat">Profile</a>
                      <a href="#" class="btn btn-default btn-flat float-end">Sign out</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
            <!--end::Container-->
          </nav>


         <!--end::Header--> <!--begin::Sidebar-->
         <aside class="app-sidebar bg-body-secondary shadow" data-bs-theme="dark">
            <!--begin::Sidebar Brand-->
            <div class="sidebar-brand">
               <!--begin::Brand Link--> 
               <a href="/appointment" class="brand-link">
                    <span class="brand-text fw-light">MUKTI</span> <!--end::Brand Text--> 
               </a>
               <!--end::Brand Link--> 
            </div>
            <!--end::Sidebar Brand--> <!--begin::Sidebar Wrapper-->
            <div class="sidebar-wrapper">
               <nav class="mt-2">
                  <!--begin::Sidebar Menu-->
                  <ul class="nav sidebar-menu flex-column" data-lte-toggle="treeview" role="menu" data-accordion="false">
                     <li class="nav-item">
                        <a href="/appointment" class="nav-link">
                           <i class="nav-icon bi bi-speedometer"></i>
                           <p>
                              Appointments
                              <i class="nav-arrow bi bi-chevron-right"></i>
                           </p>
                        </a>
                     </li>
                     <li class="nav-item">
                        <a href="/appointment/new" class="nav-link">
                           <i
                              class="nav-icon bi bi-palette"></i>
                           <p>Add Appointment</p>
                        </a>
                     </li>

                     <li class="nav-item">
                        <a href="/doctor" class="nav-link">
                           <i
                              class="nav-icon bi bi-palette"></i>
                           <p>Doctors </p>
                        </a>
                     </li>

                   
                     
                     <li class="nav-item">
                        <a href="/doctor/new" class="nav-link">
                           <i
                              class="nav-icon bi bi-palette"></i>
                           <p>Add Doctor </p>
                        </a>
                     </li>
                  </ul>
                  <!--end::Sidebar Menu-->
               </nav>
            </div>
            <!--end::Sidebar Wrapper-->
         </aside>

         
         <!--end::Sidebar--> <!--begin::App Main-->
         <main class="app-main">
            <!--begin::App Content Header-->
            <div class="app-content-header">
               <!--begin::Container-->
               <div class="container-fluid">
                  <!--begin::Row-->
                  <div class="row">
                     <div class="col-sm-6">
                        <h3 class="mb-0">All Doctors</h3>
                     </div>
                  </div>
               </div>
            </div>
            <div class="app-content">
               <!--begin::Container-->
               <div class="container-fluid">
                  <!--begin::Row-->
                  <div class="row g-4">
                     <!--begin::Col-->
                     <div class="col-md-12">
                        <!--begin::Quick Example-->
                        <div class="card card-primary card-outline mb-4">
                           <div class="card-header">
                         
                           </div>
                           <!--end::Header--> <!--begin::Form-->
                           <table class="table table-striped">
                             <thead>
                               <tr>
                                 <th></th>
                                 <th>Name</th>
                                 <th>department</th>
                                 <th>phoneNumber</th>
                                 <th>Appointments</th>
                             
                   
                                 <th>Actions</th>
                               </tr>
                             </thead>
                             <tbody>
                               <% doctor.forEach(docto => { %>
                                 <tr>
                                    <td> <img class="w-50" src="../<%= docto.img %>" alt=""></td>
                                   <td><%= docto.name %></td>
                                   <td><%= docto.department %></td>
                                   <td><%= docto.phoneNumber %></td>
                                   <td>
                                    <% if (docto.appointments && docto.appointments.length > 0) { %>
                                      <ul>
                                        <% docto.appointments.forEach(appointment => { %>
                                          <li><%= appointment.date.toDateString() %></li> <!-- Assuming date is a Date object -->
                                        <% }) %>
                                      </ul>
                                    <% } else { %>
                                      No appointments
                                    <% } %>
                                  </td>
                                  
                                 
                                   <td>
                                    <a href="/doctor/<%= docto._id %>" class="btn btn-info">View</a>
                                    <a href="/doctor/<%= docto._id %>/edit" class="btn btn-warning">Update</a>
                                    <button class="btn btn-danger" onclick="deleteCourse('<%= docto._id %>')">Delete</button>
                                   </td>
                                 </tr>
                               <% }) %>
                             </tbody>
                           </table>
                           <!--end::Form-->
                        </div>
                     </div>
                     <!--end::Col--> <!--begin::Col-->
                  </div>
                  <!--end::Row-->
               </div>
               <!--end::Container-->
            </div>
            <!--end::App Content-->
         </main>


         <!--end::App Main--> <!--begin::Footer-->
         <footer class="app-footer">
            <div class="float-end d-none d-sm-inline">Anything you want</div>
            <strong>
            Copyright &copy; 2014-2024&nbsp;
            <a href="https://adminlte.io" class="text-decoration-none">AdminLTE.io</a>.
            </strong>
            All rights reserved.
         </footer>
      </div>
      <script src="/adminlte/dist/js/adminlte.min.js"></script>

      <script>
         function deleteCourse(courseId) {
           if (confirm('Are you sure you want to delete this course?')) {
             fetch(`/doctor/${courseId}`, {
               method: 'DELETE'
             })
             .then(response => {
               if (response.ok) {
                 window.location.reload();  // Reload the page to reflect changes
               } else {
                 alert('Failed to delete the course');
               }
             })
             .catch(error => {
               console.error('Error:', error);
             });
           }
         }
       </script>
   </body>
</html>